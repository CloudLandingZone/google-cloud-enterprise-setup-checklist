# Onboarding | Customer Onboarding Program | Technical Onboarding Center
- see also https://github.com/GoogleCloudPlatform/pbmm-on-gcp-onboarding/blob/main/docs/google-cloud-onboarding.md
- see https://cloud.google.com/onboarding
- launch https://console.cloud.google.com/cloud-setup

## Prepare Before
- billing_project_quota increase from the default 5 - if you prepay $50 and ask for paid services only - quota is usually granted within 3 min by the bot.

## Cloud Setup | Overview
- https://console.cloud.google.com/cloud-setup

<img width="1436" alt="Screenshot 2023-07-04 at 1 07 01 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/5d758ce8-9d53-4111-aa53-b1f0dc99f428">

## Cloud Identity and Organization
<img width="1444" alt="Screenshot 2023-07-04 at 1 07 22 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/768f3d21-0754-4cf9-bf05-16599cea833d">

## Users and Groups
<img width="1437" alt="Screenshot 2023-07-04 at 1 07 51 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/3691851e-bee8-40b1-b020-2f3f4c1c5ec9">

<img width="1437" alt="Screenshot 2023-07-04 at 1 08 49 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/cb496ea0-513c-49c6-aeab-41da57c98688">

<img width="1441" alt="Screenshot 2023-07-04 at 1 09 11 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/e113b6d9-b1a8-4c59-b6da-80d2515215db">

<img width="1436" alt="Screenshot 2023-07-04 at 1 09 36 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/986f3fab-89de-4e43-8bc9-a419f4082e57">

- View groups
- Groups visible in admin
<img width="1424" alt="Screenshot 2023-07-04 at 1 11 06 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/192fcede-bb81-4997-8721-c2b5186a9ccd">
- Same groups visible in the console
<img width="1434" alt="Screenshot 2023-07-04 at 1 10 29 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/ba62935b-88f7-4189-a287-8a6524b6d101">

- Add users to the groups - by default the super admin user you are using is already there
<img width="1432" alt="Screenshot 2023-07-04 at 1 12 05 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/2272fa13-77aa-4053-a011-b2597d92bb62">

<img width="1430" alt="Screenshot 2023-07-04 at 1 17 52 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/fe45e51d-b190-4c3b-ac4c-02958c2c311e">

## Administrative Access
- I already setup the admin user with the following roles - Owner is not recommended
- <img width="1431" alt="Screenshot 2023-07-04 at 1 19 09 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/50e96297-b140-495b-a393-28d12bbc749c">

<img width="1434" alt="Screenshot 2023-07-04 at 1 18 26 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/d1607b9b-465a-4433-8672-0d7b179ba6b4">
- add administrative access to the groups themselves
<img width="1437" alt="Screenshot 2023-07-04 at 1 19 55 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/0d670c6c-d8ce-48dd-8815-3006dd3aaaac">

<img width="1426" alt="Screenshot 2023-07-04 at 1 20 53 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/70483fd8-9afb-4f3b-aca5-61eddc151ef2">

## Billing
- already setup for direct billing
<img width="1434" alt="Screenshot 2023-07-04 at 1 21 47 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/68ccf993-aff8-4ff8-94b4-60049930a045">

<img width="1434" alt="Screenshot 2023-07-04 at 1 24 02 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/9243c7e2-7cf4-44d8-9b1b-473d81da99cb">
- confirm billing

## Hierarchy & Access

<img width="1436" alt="Screenshot 2023-07-04 at 1 25 29 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/3ca487d4-db30-4a1e-91a1-c8142fd8a661">
- Request a project quota increase 
- follow https://support.google.com/code/contact/billing_quota_increase and use as a reference https://github.com/GoogleCloudPlatform/pbmm-on-gcp-onboarding/blob/main/docs/google-cloud-onboarding.md#quota-increase
- prepay $50 and then ask for under 50 projects (30), use only the paid option

<img width="798" alt="Screenshot 2023-07-04 at 1 30 03 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/63ceba6f-0a00-4a5c-8de6-0c313149c1a6">

<img width="1434" alt="Screenshot 2023-07-04 at 1 26 33 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/87a8c974-585d-4a2f-bc61-2f9a69790622">

- if you prepay $50 and ask for paid services only - quota is usually granted within 3 min by the bot.

<img width="1433" alt="Screenshot 2023-07-04 at 1 43 47 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/d70ea689-d2f5-412d-9731-0ae7e10668eb">

- setup resource hierarchy

<img width="1428" alt="Screenshot 2023-07-04 at 1 46 26 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/122cf9ac-b94e-4862-bf95-dd0604c128e4">

- pick full unit/team/environment
<img width="1114" alt="Screenshot 2023-07-04 at 1 48 34 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/fbf49c70-2596-4618-b528-c1e42c3b892e">

<img width="1441" alt="Screenshot 2023-07-04 at 1 50 11 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/fd3b05e6-c3a8-4122-8f33-80489f857fc7">

- move from 3 units to 2
<img width="1435" alt="Screenshot 2023-07-04 at 1 50 58 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/1c580256-b160-47fd-8755-3c5991ba347e">

- delete 2 of 4 teams
<img width="1433" alt="Screenshot 2023-07-04 at 1 58 17 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/764751cf-9739-4af7-9d3c-04df7462ee2f">
- keep 3 environments
<img width="1435" alt="Screenshot 2023-07-04 at 2 01 46 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/d448ee27-d2bf-414d-bb16-ca9055b2e4fb">
- reduce the number of projects for now
<img width="1438" alt="Screenshot 2023-07-04 at 2 02 26 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/d24af05b-2cbb-4cf5-acd7-e1560b706dec">
- just use 1/1/1 unit/team/env to conserve project resources.
### Configure Access Control

<img width="1446" alt="Screenshot 2023-07-04 at 3 41 24 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/4e19d11d-dfe2-404a-af2a-7d621ce0b653">

<img width="856" alt="Screenshot 2023-07-04 at 3 41 53 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/3c3a9bd6-f60f-4c60-8e90-93fb0fb956ce">


- existing resources list
  
<img width="1432" alt="Screenshot 2023-07-04 at 3 40 45 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/f24321e3-aca0-4ec0-9f45-8f65a90d241a">

- review resources

- <img width="1431" alt="Screenshot 2023-07-04 at 3 51 40 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/4cf5cea8-2ebc-45d1-9ebd-a4125081c602">
- continue to networking
<img width="1427" alt="Screenshot 2023-07-04 at 3 51 14 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/5e7de1cb-47e1-4f64-9d88-ef8e5403f5d2">

## Networking
<img width="1431" alt="Screenshot 2023-07-04 at 3 52 29 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/fec30cb2-93d9-434c-84bb-5be3a3a6ddf5">

<img width="1430" alt="Screenshot 2023-07-04 at 3 54 49 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/231cb7f5-dce1-4246-a129-cb62ba64128b">

### What it is

A VPC network is like a physical network, except virtualized within Google Cloud. It's a global resource that consists of a list of regional subnetworks (subnets). A Shared VPC  is a type of VPC that lets you designate a project as a host project  and attach one or more other service projects  to it. A host project lets you centrally manage routes, firewalls, VPN connections, and subnets as well as share selected subnets, including secondary ranges, with service projects. A service project is any project that's been attached to a host project.

### Examples of what it does
- Provides connectivity for your virtual machine (VM)  and GKE instances 
- Distributes traffic among internal virtual machine (VM) instances within the same region or globally
- Exposes applications with the use of a global or internal load balancer
- Connects to on-premises networks by using Cloud VPN tunnels or VLAN attachments for Cloud Interconnect
- Enables your resources to communicate with each other by using internal IP addresses from a common network

### Why we recommend it
For organizations with multiple teams, Shared VPC provides an effective tool to extend the architectural simplicity of a single VPC network  across multiple working groups. The simplest approach is to deploy a single Shared VPC host project with a single Shared VPC network and then attach service projects to host projects for each of your teams. In this configuration, network policy and control for all networking resources are centralized and easy to manage. It's recommended to use two Shared VPCs to segment non-production and production workloads. Within each Shared VPC, service project departments can configure and manage non-network resources, enabling a clear separation of responsibilities for different teams in the organization. Resources in the service projects can communicate with each other securely and efficiently across project boundaries using internal IP addresses. You can manage shared network resources such as subnets, routes, and firewalls from the central host project allowing you to enforce consistent network policies across projects.

### Key considerations
- Services running in a service project can use Shared VPC to communicate with resources running in the other service projects. It's common to have multiple service projects operated and administered by different departments or teams in your organization.
- A service project can only be associated with a single host project. A service project by default has access to all of the VPCs in the host project it is associated with. A network administrator can grant a service project access to only some subnets.
- Resource quotas  are often applied at the project level (host project) and apply to all Shared VPCs in the same project. Consider the impact of this approach when multiple workloads are leveraging the same resources.
- IAM roles apply at the project level (host project), as opposed to the network or subnet level. If permitted, network and security admins will have the ability to make changes to the network and network security configuration on the host project and all of the host project's Shared VPCs. Administration of IAM roles of compute, storage, and other workload-related resources is defined in the individual service projects.
- By default, resources deployed in different Shared VPCs are unable to communicate with each other. Additional configuration is required to enable cross-VPC communication. Learn more 
- Eligible resources from service projects can use subnets in the Shared VPC network. Learn more

### Configure Networks
- <img width="1434" alt="Screenshot 2023-07-04 at 3 55 20 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/26f6c6c5-1339-4a14-b340-8b60097850e9">
- Configure Shared VPC
<img width="1439" alt="Screenshot 2023-07-04 at 3 56 01 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/d7639d97-1264-4596-a609-8e29fb53f55d">
- <img width="1439" alt="Screenshot 2023-07-04 at 3 56 01 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/d7639d97-1264-4596-a609-8e29fb53f55d">
- <img width="572" alt="Screenshot 2023-07-04 at 3 56 50 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/70663d96-1c98-4e0f-9506-31c00f454956">
- <img width="1431" alt="Screenshot 2023-07-04 at 3 59 12 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/4d6723d0-4f1f-446a-832f-13c3a2dfc7d0">

<img width="1441" alt="Screenshot 2023-07-04 at 3 59 48 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/bb02fe9d-0091-4e77-9986-a23cb556379d">
#### Turn off VPC flow logs
- VPC Flow logs are not really required past a couple days - save on costs
<img width="1130" alt="Screenshot 2023-07-04 at 4 00 28 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/9c25d92a-0a14-4455-b4be-8967761c4b81">
#### Create and Connect Service projects later
- https://cloud.google.com/vpc/docs/provisioning-shared-vpc?&_ga=2.63560431.-1155012423.1687982978#create-shared
<img width="1119" alt="Screenshot 2023-07-04 at 4 01 10 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/347dac23-c3d3-4c92-a03b-98c81db1a955">


<img width="1436" alt="Screenshot 2023-07-04 at 4 01 47 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/a810e0cf-c311-46db-b847-823cbac07b75">

## Centralize Logging
<img width="1433" alt="Screenshot 2023-07-04 at 4 02 50 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/b599aeff-a28b-4ddc-95b9-304f2000176d">

<img width="1416" alt="Screenshot 2023-07-04 at 4 05 07 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/557afb3c-0d92-4a3f-bd7d-337ef2c7267b">

<img width="1438" alt="Screenshot 2023-07-04 at 4 03 50 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/be8dde5b-1541-4dd0-8354-b717e4e1efa7">

<img width="1432" alt="Screenshot 2023-07-04 at 4 05 20 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/3da640bf-047d-40c8-9e81-89e7d832d1c6">

<img width="1431" alt="Screenshot 2023-07-04 at 4 05 54 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/91979146-c8f8-4898-a88c-a002720f1c53">

<img width="1427" alt="Screenshot 2023-07-04 at 4 06 17 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/efd1caff-3eaf-423b-a806-3c9eb7c3f82b">

## Deploy Terraform - preview 20230704
- https://cloud.google.com/docs/terraform/deploy-foundation-using-terraform-from-console?_ga=2.125030730.-1155012423.1687982978
<img width="1435" alt="Screenshot 2023-07-04 at 4 06 45 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/ddbea223-a383-49bf-bc92-e6803b6bc05c">

<img width="439" alt="Screenshot 2023-07-04 at 4 07 26 PM" src="https://github.com/CloudLandingZone/google-cloud-enterprise-setup-checklist/assets/94715080/516122c0-7b63-4416-aeee-8736e2bc10a3">
